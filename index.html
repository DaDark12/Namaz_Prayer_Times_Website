<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Namaz Prayer Times</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ===================== -->
    <!-- HEADER -->
    <!-- ===================== -->
    <header>
        <h1>Namaz Prayer Times & Qibla Finder</h1>
    </header>

    <!-- ===================== -->
    <!-- MAIN CONTENT -->
    <!-- ===================== -->
    <main>
        <!-- PRAYER TIMES -->
        <section class="prayer-times">
            <h2>Prayer Times</h2>
            <ul id="prayer-list">
                <li>Fajr: —</li>
                <li>Dhuhr: —</li>
                <li>Asr: —</li>
                <li>Maghrib: —</li>
                <li>Isha: —</li>
            </ul>
        </section>

        <!-- QIBLA FINDER -->
        <section class="qibla-section">
            <h2>Qibla Finder</h2>
            <div class="qibla-container">
                <!-- Compass Circle -->
                <div id="qibla-compass">
                    <!-- Needle -->
                    <div id="qibla-needle"></div>
                    <!-- Glow effect -->
                    <div class="compass-glow"></div>
                </div>
                <!-- Angle Display -->
                <div id="qibla-angle">—°</div>
                <!-- View Toggle Button -->
                <button id="view-switch">Switch View</button>
            </div>
        </section>
    </main>

    <!-- ===================== -->
    <!-- FOOTER -->
    <!-- ===================== -->
    <footer>
        <p>© 2025 Namaz Prayer Times</p>
    </footer>

    <!-- ===================== -->
    <!-- ORIGINAL SCRIPTS -->
    <!-- ===================== -->
    <!-- Keep all your original scripts fully intact -->
    <script src="your-original-scripts.js"></script>

    <!-- ===================== -->
    <!-- QIBLA + RESPONSIVE SCRIPT -->
    <!-- ===================== -->
    <script>
    // --------------------
    // UTILITY FUNCTIONS
    // --------------------
    function toRadians(deg) { return deg * Math.PI / 180; }
    function toDegrees(rad) { return rad * 180 / Math.PI; }

    // --------------------
    // CALCULATE QIBLA DIRECTION
    // --------------------
    function calculateQibla(lat, lon) {
        const kaabaLat = 21.4225;
        const kaabaLon = 39.8262;

        const phiK = toRadians(kaabaLat);
        const phiL = toRadians(lat);
        const deltaLambda = toRadians(kaabaLon - lon);

        const x = Math.sin(deltaLambda);
        const y = Math.cos(phiL) * Math.tan(phiK) - Math.sin(phiL) * Math.cos(deltaLambda);
        let qibla = toDegrees(Math.atan2(x, y));
        if(qibla < 0) qibla += 360;
        return qibla;
    }

    // --------------------
    // UPDATE COMPASS
    // --------------------
    function updateQibla() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((pos) => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                const qibla = calculateQibla(lat, lon);

                const needle = document.getElementById("qibla-needle");
                const angleDisplay = document.getElementById("qibla-angle");
                if(needle) needle.style.transform = `rotate(${qibla}deg)`;
                if(angleDisplay) angleDisplay.innerText = Math.round(qibla) + "°";
            }, () => {
                alert("Unable to get your location. Please allow location access.");
            });
        } else {
            alert("Geolocation not supported in your browser.");
        }
    }

    // --------------------
    // RESPONSIVE VIEW + TOGGLE
    // --------------------
    const body = document.body;
    const switchBtn = document.getElementById("view-switch");

    function detectView() {
        if(window.innerWidth <= 768) body.classList.add("mobile-view");
        else body.classList.remove("mobile-view");
    }

    if(switchBtn) {
        switchBtn.addEventListener("click", () => {
            body.classList.toggle("mobile-view");
        });
    }

    // --------------------
    // INITIALIZATION
    // --------------------
    window.addEventListener("resize", detectView);
    window.addEventListener("load", () => {
        detectView();
        updateQibla();
    });
    </script>
</body>
</html>
